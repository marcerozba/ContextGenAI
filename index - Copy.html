<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Visualization</title>
    <style>
        .container {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
        }
        .headline {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .button {
            display: inline-block;
            padding: 10px 20px;
            margin-top: 10px;
            border-radius: 3px;
            background-color: rgb(74, 11, 255);
            color: white;
            text-align: center;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="app" class="container"></div>

    <script>
        async function loadJSON(file) {
            const response = await fetch(file);
            const data = await response.json();
            return data;
        }

        function renderBox(box, container) {
            if (box.level === 'widget') {
                const docContent = box.options.doc ? box.options.doc.content : [];
                docContent.forEach(contentItem => {
                    if (contentItem.type === 'headline') {
                        const headline = document.createElement('div');
                        headline.className = 'headline';
                        headline.textContent = contentItem.content[0].text;
                        container.appendChild(headline);
                    }
                });
            }

            if (box.level === 'widget') {
                const options = box.options;
                if (options.text) {
                    const button = document.createElement('a');
                    button.className = 'button';
                    button.textContent = options.text;
                    button.href = '#';
                    button.style.backgroundColor = options.primaryColor;
                    button.style.color = options.secondaryColor;
                    button.style.fontSize = `${options.fontSize}px`;
                    container.appendChild(button);
                }
            }

            if (box.boxes) {
                box.boxes.forEach(subBox => {
                    renderBox(subBox, container);
                });
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const data = await loadJSON('test_context.json');
            // const data = await loadJSON('test_context2.json');
            const appContainer = document.getElementById('app');
            data.boxes.forEach(box => renderBox(box, appContainer));
        });
    </script>
</body>
</html>
